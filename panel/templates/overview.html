{% extends "layout.html" %}

{% block title %}Overview - {{ panel_name }}{% endblock %}

{% block styles %}
<style>
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
.stat-card { background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
.stat-value { font-size: 2.5rem; font-weight: bold; color: #333; }
.stat-label { color: #666; margin-top: 0.5rem; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; }
.section-card { background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 2rem; }
</style>
{% endblock %}

{% block header %}Overview{% endblock %}

{% block content %}

<!-- Tabs Navigation -->
<ul class="nav nav-tabs" id="overviewTabs" role="tablist" style="margin-bottom: 20px; border-bottom: 1px solid #dee2e6; display: flex; list-style: none; padding-left: 0;">
  <li class="nav-item">
    <a class="nav-link active" id="stats-tab" href="#stats" onclick="openTab(event, 'stats')" style="padding: 10px 15px; text-decoration: none; color: #495057; border: 1px solid #dee2e6; border-bottom-color: transparent; border-top-left-radius: 0.25rem; border-top-right-radius: 0.25rem; margin-right: 2px; background: white; cursor: pointer;">Statistics</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="settings-tab" href="#settings" onclick="openTab(event, 'settings')" style="padding: 10px 15px; text-decoration: none; color: #007bff; border: 1px solid transparent; border-bottom-color: transparent; border-top-left-radius: 0.25rem; border-top-right-radius: 0.25rem; margin-right: 2px; cursor: pointer;">Settings</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="users-tab" href="#users" onclick="openTab(event, 'users')" style="padding: 10px 15px; text-decoration: none; color: #007bff; border: 1px solid transparent; border-bottom-color: transparent; border-top-left-radius: 0.25rem; border-top-right-radius: 0.25rem; margin-right: 2px; cursor: pointer;">Users</a>
  </li>
</ul>

<!-- Statistics Tab -->
<div id="stats" class="tab-content" style="display: block;">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ total_nodes }}</div>
            <div class="stat-label">Total Nodes</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: #28a745">{{ online_nodes }}</div>
            <div class="stat-label">Online Nodes</div>
        </div>
        <div class="stat-card">
           <div class="stat-value" style="color: #007bff">{{ panel_version }}</div>
           <div class="stat-label">Panel Version</div>
        </div>
    </div>
</div>

<!-- Settings Tab -->
<div id="settings" class="tab-content" style="display: none;">
    <div class="section-card">
        <h3>General Settings</h3>
        <form hx-post="/settings/update" hx-swap="none">
            <div class="form-group">
                <label for="panel_name">Panel Name</label>
                <input type="text" id="panel_name-input" name="panel_name" value="{{ panel_name }}" placeholder="Default: Yunexal Panel" style="max-width: 400px;">
            </div>
            <div id="settings-message"></div>
            <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Save Settings</button>
        </form>
    </div>
</div>

<!-- Users Tab -->
<div id="users" class="tab-content" style="display: none;">
    <div class="section-card">
        <h3>User Management</h3>
        <p style="color: #666;">User management feature is coming soon.</p>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 5px; text-align: center;">
            <p>Admin (You) - <span class="badge badge-success" style="background: #28a745; color: white; padding: 2px 6px; border-radius: 4px;">Active</span></p>
        </div>
    </div>
</div>

<script>
function openTab(evt, tabName) {
  var i, tabcontent, tablinks;

  // Hide all tab content
  tabcontent = document.getElementsByClassName("tab-content");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Remove active styling from all tab links
  tablinks = document.getElementsByClassName("nav-link");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].style.backgroundColor = "";
    tablinks[i].style.color = "#007bff";
    tablinks[i].style.border = "1px solid transparent";
  }

  // Show the specific tab content
  document.getElementById(tabName).style.display = "block";

  // Add active styling to the button that opened the tab
  evt.currentTarget.style.backgroundColor = "white";
  evt.currentTarget.style.color = "#495057";
  evt.currentTarget.style.border = "1px solid #dee2e6";
  evt.currentTarget.style.borderBottomColor = "transparent";
}
</script>

{% endblock %}
