## Version: v0.1.3-dev
**Status:** Completed
**Branch:** 0.1.3-dev

### Yunexal Panel

#### ðŸŒŸ New Features
- **Servers Management:** Added "Servers" tab. Handles empty state by prompting node creation.
- **Resource Monitoring:** Implemented **Disk Usage** collection.
    - Node agent scans mounted disks and reports used vs total storage.
    - Panel displays live disk statistics in the node list.

#### âœ¨ Allocations System
- **Port Management:** Introduced complete Allocation system. Users can assign specific UDP/TCP ports to nodes.
- **Strict Validation:** 
    - **Security:** Added backend and frontend checks to prevent assigning restricted system ports (0-1023) to node allocations.
    - **Advice:** Warns on ephemeral ranges and strictly blocks reserved ports.
- **Bulk Import:** Support for port ranges (e.g., `25565-25570`) and comma-separated lists during creation.
- **Integration:** "Initial Allocations" field added to Node Creation wizard for faster setup.
- **UI:** Dedicated Allocations management view for each node with pagination.

#### ðŸš€ Enhancements
- **Caching Strategy:** Implemented two-layer caching (RAM + Redis) for Node data to reduce database load.
- **UI Architecture:** Complete refactor to **Askama** (Type-Safe Attributes) + **HTMX**. Replaced `format!` macro HTML generation with compile-time verified templates.
- **Logs System:** Rewrote Logs handler. Added "latest.log" virtual file, server-side log level parsing, and live refresh capabilities. Restored Search and Level filters (JavaScript-based) for easier debugging.
- **Node Updates:** Added "Update Node" button in panel to trigger remote self-update of the Node agent.
- **Resource Management:** Added SFTP, RAM Limit, Disk Limit, and CPU Limit configuration for Nodes.
- **Auto-Discovery:** Implemented intelligent resource auto-discovery. If limits are set to "0" (Auto), the Node automatically reserves 95% of available System RAM and Disk.

#### ðŸŽ¨ Redesign & UX
- **Nodes List:** Redesigned Node cards. Removed clutter (Install/Uninstall/Update buttons) in favor of a clean "Status" overview.
- **Monitoring:** Added inline monitoring badges to Node cards: Ping, RAM Usage, Disk Status, CPU Load.
- **Centralized Management:** Moved administrative actions (Rotate Token, Update, Delete) to the "Edit Node" page.
- **Offline Mode:** Added a global "Connection Lost" banner that appears automatically when internet connection is unstable.
- **Dashboard Features:**
    - **HTMX Polling:** Nodes list now auto-refreshes every 5 seconds without page reload.
    - **Smart Uptime:** Uptime is now human-readable (e.g., "2h 15m" instead of raw seconds).
    - **Latency Logic:** Implemented server-side latency calculation (Ping) based on heartbeat timestamps.
    - **Overview Tabs:** Redesigned Overview page with tabs (Statistics, Settings, Users).

#### ðŸ”§ Fixes
- **Code Quality:** Resolved all compiler warnings and removed unused imports across the panel crate.
- **UX:** Improved Node deletion interactions using HTMX swaps (instant removal without page reload).
- **Format:** Execution time is now formatted to 2 decimal places everywhere.
- **Forms:** Fixed validation for optional numeric fields (RAM/Disk limits). Empty fields now correctly default to "Auto" (None/0).
- **Debugging:** Enhanced error logging on the "Edit Node" page to identify database connection failures preventing node data from loading.

### Yunexal Node

#### ðŸŒŸ New Features
- **Self-Update:** Implemented `/self-update` endpoint. Downloads new binary from panel, swaps executable, and restarts.
- **Auto-Config:** Automatically detects system resources (RAM/Disk) on startup if limits are not strictly defined by the panel.

#### ðŸ”§ Fixes
- **Stability:** Fixed compilation warnings regarding unused configuration fields.
- **Config persistence:** Ensures resource limits and custom ports are preserved during token rotation.
- **Heartbeat Protocol:** Updated communication contract to support new disk metrics and fixed missing fields in Auth Handler.
- **Dependencies:** Resolved `sysinfo` crate compatibility issue (v0.37.2) causing compilation errors.

### ðŸ› ï¸ Connectivity & Performance (Hotfix)
- **Heartbeat Architecture:** Complete rewrite of the Heartbeat system.
    - **URL Fix:** Fixed critical mismatch in Node heartbeat URL (`/api/nodes` -> `/nodes`).
    - **Failover:** Implemented **In-Memory Fallback** for online status. If Redis is down, the panel now uses internal RAM to track node status (preventing false "Offline" states).
    - **Auth Optimization:** Heartbeat authentication now checks Memory Cache first, eliminating database queries for authorized nodes.
- **Tracing:** Added Atomic Tracing (`[TRACE]`) visible in panel logs for deep debugging of connectivity issues.
